const GAME=function(e){let t,n,o,s=0,a=0,l=0,r=function(){s=0,t={w:"",d:""};let e="",a="",l=!1;for(;!l;){for(i=0,t=DICTIONARY.getNextData(),e=(n=UTILS.removeDiacritics(t.w.toUpperCase())).charAt(0),a=n.slice(-1),o="";i<n.length;i++)n.charAt(i)==e?o+=e:n.charAt(i)==a?o+=a:"-"==n.charAt(i)?o+="-":o+="_";-1!=o.indexOf("_")&&(l=!0)}let d,E;for(i=0;i<26;i++)E="key"+String.fromCharCode(i+65),d=document.getElementById(E),E=="key"+e||E=="key"+a?(d.className="keyDisabled",d.removeEventListener("click",m,!1)):(d.className="key",d.addEventListener("click",m,!1));(d=document.getElementById("keyPlay")).className="keyDisabled",d.removeEventListener("click",r,!1),(d=document.getElementById("keyStop")).className="key",d.addEventListener("click",c,!1),f(o),B(),L(s)},c=function(){let e=i18n.getData();HMI.showConfirmBox(e.stopGameMessageBox.Title,e.stopGameMessageBox.Content,e.yes,e.no,d,HMI.closeConfirmBox)},d=function(){E(),t={w:"",d:""},f(o=""),HMI.closeConfirmBox()},E=function(e){let t,n;for(t=0;t<26;t++)(n=document.getElementById("key"+String.fromCharCode(t+65))).className="keyDisabled",n.removeEventListener("click",m,!1);n=document.getElementById("keyPlay"),!0==e?(n.className="keyDisabled",n.removeEventListener("click",r,!1)):(n.className="key",n.addEventListener("click",r,!1)),(n=document.getElementById("keyStop")).className="keyDisabled",n.removeEventListener("click",c,!1)},m=function(){let e=this.id.slice(-1);if(0>n.indexOf(e))L(++s);else for(i=0;i<o.length;i++)n.charAt(i)==e&&(o=UTILS.replaceCharAt(o,i,e));f(o),this.className="keyDisabled",this.removeEventListener("click",m,!1),0>o.indexOf("_")?(E(!0),g(),HMI.showMessageBox(!0,s),a++,l++,y()):s>7&&(E(!0),f(n),g(),HMI.showMessageBox(!1,s),a++,y())},y=function(){document.getElementById(HMI.ids.ELEMENT_SCORE_ID).innerHTML="Score : "+l+" / "+a,PARAMETERS.storeScore(l,a,!0)},f=function(e){document.getElementById(HMI.ids.ELEMENT_WORD_ID).innerHTML=e},g=function(){document.getElementById(HMI.ids.ELEMENT_DEFINITION_ID).innerHTML=t.d},B=function(){document.getElementById(HMI.ids.ELEMENT_DEFINITION_ID).innerHTML=""},I=function(){l=0,a=0,y(),HMI.closeConfirmBox()},k=function(){let e=i18n.getData();HMI.showConfirmBox(e.clearScoreMessageBox.Title,e.clearScoreMessageBox.Content,e.yes,e.no,I,HMI.closeConfirmBox)},L=function(e){HMI.crossFadeMultipleImages("drawing",e)},M=function(e){HMI.setLayout(e),HMI.initializeFader(),i18n.initializeHmiMessages(PARAMETERS.getLanguage()),DICTIONARY.createIndex();let t=PARAMETERS.getScore();null!=t.found&&null!=t.total&&(l=t.found,a=t.total),y(),_currentPointer=0,document.getElementById(HMI.ids.ELEMENT_FADER_ID).addEventListener("animationend",HMI.onFaderAnimationEnd,!1),document.getElementById(HMI.ids.ELEMENT_MESSAGE_BOX_ID).addEventListener("animationend",HMI.onMessageBoxAnimationEnd,!1),document.getElementById(HMI.ids.ELEMENT_CONFIRM_BOX_ID).addEventListener("animationend",HMI.onConfirmBoxAnimationEnd,!1)};return{initialize:M,start:r,stop:c,disableKeyboard:E,confirmClearScore:k}}();